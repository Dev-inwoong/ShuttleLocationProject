Index: app/src/main/java/kr/rabbito/shuttlelocationproject/SettingActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package kr.rabbito.shuttlelocationproject\r\n\r\nimport android.content.Context\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.View\r\nimport android.widget.Toast\r\nimport com.google.firebase.database.FirebaseDatabase\r\nimport com.google.firebase.database.ktx.database\r\nimport com.google.firebase.database.ktx.getValue\r\nimport com.google.firebase.ktx.Firebase\r\nimport kr.rabbito.shuttlelocationproject.data.Comment\r\nimport kr.rabbito.shuttlelocationproject.data.ManagerDialog\r\nimport kr.rabbito.shuttlelocationproject.databinding.ActivityMainBinding\r\nimport kr.rabbito.shuttlelocationproject.databinding.ActivitySettingBinding\r\nimport kr.rabbito.shuttlelocationproject.function.hashSHA256\r\n\r\nclass SettingActivity : AppCompatActivity() {\r\n    private var mBinding: ActivitySettingBinding? = null\r\n    private val binding get() = mBinding!!\r\n\r\n    val pwdPath = listOf(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\")\r\n    val PWD = mutableListOf<String>()\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        mBinding = ActivitySettingBinding.inflate(layoutInflater)\r\n\r\n        setContentView(binding.root)\r\n        overridePendingTransition(0, 0)\r\n\r\n\r\n        val shared = getSharedPreferences(\"Mode\", Context.MODE_PRIVATE)\r\n        val editor = shared.edit()\r\n\r\n        //관리자 로그인 버튼 클릭\r\n        binding.settingClSettingAdmin.setOnClickListener {\r\n            val dialog = ManagerDialog(this)\r\n            dialog.showDialog()\r\n            dialog.setOnClickListner(object:ManagerDialog.ButtonClickListener{\r\n                override fun onClicked(text:String){\r\n                    //inputPassword : 사용자가 입력한 PWD\r\n                    val inputPassword = text.hashSHA256()\r\n                    //Log.d(\"TAG\",\"hashPWD : ${inputPassword.hashSHA256()}\")\r\n\r\n                    //pwdPath : Firebase에 저장되어 있는 key 값\r\n                    //dbPasspword : 이미 등록되어 있는 PWD.hashSHA226() 값\r\n\r\n                    for(i in pwdPath.indices){\r\n                        //루프 돌며 이미 등록되어 있는 관리자 비밀와 inputPassword 비교\r\n                        Firebase.database.getReference(\"Manager\").child(\"$i\").\r\n                        get().addOnCompleteListener {task ->\r\n                            if (task.isSuccessful){\r\n                                val dbPassword = task.result.getValue()\r\n                                PWD.add(dbPassword.toString())\r\n\r\n\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    //사용자 입력 비밀번호가 Manager PWD 리스트에 있는지 검사\r\n                    if (inputPassword in PWD) {\r\n                        editor.putString(\"UserMode\", \"Manager\")\r\n                        editor.apply()\r\n\r\n                        Toast.makeText(this@SettingActivity, \"관리자로 로그인 되었습니다.\", Toast.LENGTH_SHORT)\r\n                            .show()\r\n                        finish()\r\n                    }\r\n                    else{\r\n                            Toast.makeText(this@SettingActivity,\"비밀번호가 일치하지 않습니다.\",Toast.LENGTH_SHORT).show()\r\n                    }\r\n\r\n                }\r\n            })\r\n        }\r\n\r\n        binding.settingClSettingInfo.setOnClickListener {\r\n            Toast.makeText(this, \"test\", Toast.LENGTH_SHORT).show()\r\n        }\r\n\r\n\r\n        binding.settingBtnBack.setOnClickListener {\r\n            finish()\r\n        }\r\n    }\r\n\r\n    override fun finish() {\r\n        super.finish()\r\n        overridePendingTransition(0, 0)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/kr/rabbito/shuttlelocationproject/SettingActivity.kt b/app/src/main/java/kr/rabbito/shuttlelocationproject/SettingActivity.kt
--- a/app/src/main/java/kr/rabbito/shuttlelocationproject/SettingActivity.kt	(revision 2ad0ff4c0c2ec778db0251f28f7524d3a5b410f5)
+++ b/app/src/main/java/kr/rabbito/shuttlelocationproject/SettingActivity.kt	(date 1654145354048)
@@ -33,6 +33,12 @@
         val shared = getSharedPreferences("Mode", Context.MODE_PRIVATE)
         val editor = shared.edit()
 
+        for(i in pwdPath.indices){
+            //루프 돌며 이미 등록되어 있는 관리자 비밀와 inputPassword 비교
+            val dbPassword = Firebase.database.getReference("Manager").child(pwdPath[i]).get()
+            PWD.add(dbPassword.toString())
+
+        }
         //관리자 로그인 버튼 클릭
         binding.settingClSettingAdmin.setOnClickListener {
             val dialog = ManagerDialog(this)
@@ -46,18 +52,7 @@
                     //pwdPath : Firebase에 저장되어 있는 key 값
                     //dbPasspword : 이미 등록되어 있는 PWD.hashSHA226() 값
 
-                    for(i in pwdPath.indices){
-                        //루프 돌며 이미 등록되어 있는 관리자 비밀와 inputPassword 비교
-                        Firebase.database.getReference("Manager").child("$i").
-                        get().addOnCompleteListener {task ->
-                            if (task.isSuccessful){
-                                val dbPassword = task.result.getValue()
-                                PWD.add(dbPassword.toString())
 
-
-                            }
-                        }
-                    }
 
                     //사용자 입력 비밀번호가 Manager PWD 리스트에 있는지 검사
                     if (inputPassword in PWD) {
